#!/bin/sh
# Husky pre-commit hook
# Run linting and unit tests before committing

echo "ğŸ” Running pre-commit checks..."

# Run linting for both API and Web
echo "ğŸ“‹ Linting API..."
pnpm run lint:api
if [ $? -ne 0 ]; then
  echo "âŒ API linting failed. Please fix the issues before committing."
  exit 1
fi

echo "ğŸ“‹ Linting Web..."
pnpm run lint:web
if [ $? -ne 0 ]; then
  echo "âŒ Web linting failed. Please fix the issues before committing."
  exit 1
fi

# Run unit tests for API
echo "ğŸ§ª Running API unit tests..."
pnpm run test:unit:api
if [ $? -ne 0 ]; then
  echo "âŒ API unit tests failed. Please fix the tests before committing."
  exit 1
fi

# Run unit tests for Web
echo "ğŸ§ª Running Web unit tests..."
pnpm run test:unit:web
if [ $? -ne 0 ]; then
  echo "âŒ Web unit tests failed. Please fix the tests before committing."
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
