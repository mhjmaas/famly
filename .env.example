# ============================================================================
# Famly Home - Unified Environment Configuration
# ============================================================================
# This is the ONLY .env file needed. Copy to .env and update the values.
# App-specific .env files have been eliminated to reduce duplication.
# ============================================================================

# ----------------------------------------------------------------------------
# DEPLOYMENT CONFIGURATION
# ----------------------------------------------------------------------------
# Deployment Mode
# - standalone: Single-family mode, registration locks after first family
# - saas: Multi-tenant mode with open registration (not recommended for home use)
DEPLOYMENT_MODE=standalone

# Protocol: http or https
# - http: Direct access to services (dev only, no Caddy)
# - https: Access via Caddy reverse proxy (recommended)
PROTOCOL=https

# Caddyfile Selection (only used when PROTOCOL=https)
# - Caddyfile.localhost: Development with mkcert
# - Caddyfile.production: Production with Let's Encrypt
CADDYFILE=Caddyfile.localhost

# ----------------------------------------------------------------------------
# URL CONFIGURATION
# ----------------------------------------------------------------------------
# These URLs change based on your deployment mode:
#
# Development (HTTP mode):
#   CLIENT_URL=http://localhost:3000
#   BETTER_AUTH_URL=http://localhost:3001
#   NEXT_PUBLIC_API_URL=http://localhost:3001
#   NEXT_PUBLIC_WS_URL=http://localhost:3001
#
# Development (HTTPS mode via Caddy):
#   CLIENT_URL=https://localhost:8443
#   BETTER_AUTH_URL=https://localhost:8443
#   NEXT_PUBLIC_API_URL=https://localhost:8443
#   NEXT_PUBLIC_WS_URL=https://localhost:8443
#
# Production (Custom Domain):
#   CLIENT_URL=https://your-domain.com
#   BETTER_AUTH_URL=https://your-domain.com
#   NEXT_PUBLIC_API_URL=https://your-domain.com/api
#   NEXT_PUBLIC_WS_URL=https://your-domain.com
# ----------------------------------------------------------------------------

# CORS origin (where browser requests come from)
CLIENT_URL=https://localhost:8443

# Authentication URL (used by better-auth)
BETTER_AUTH_URL=https://localhost:8443

# Client-side API URL (browser requests)
NEXT_PUBLIC_API_URL=https://localhost:8443/api

# Client-side WebSocket URL (Socket.IO connections)
NEXT_PUBLIC_WS_URL=https://localhost:8443

TIMEZONE="Europe/Amsterdam"

# ----------------------------------------------------------------------------
# THIRD-PARTY INTEGRATIONS
# ----------------------------------------------------------------------------
# ----------------------------------------------------------------------------
# Tavily API Key (for chore and reward suggestions)
# Sign up at https://tavily.com to get an API key
# ----------------------------------------------------------------------------
TAVILY_KEY=your_tavily_key_here

# ----------------------------------------------------------------------------
# SECRETS
# ----------------------------------------------------------------------------
# Better Auth Secret (minimum 32 characters)
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=change-this-to-a-secure-random-string-min-32-chars-required

# MinIO Storage Credentials
MINIO_ROOT_USER=famly-admin
MINIO_ROOT_PASSWORD=change-this-to-a-secure-password-min-32-chars

# VAPID Keys for Push Notifications
# Generate with: npx web-push generate-vapid-keys
# NOTE: Keep the same keys across all environments for consistent notifications
NEXT_PUBLIC_VAPID_PUBLIC_KEY=your_public_key_here
VAPID_PRIVATE_KEY=your_private_key_here
# Email address for VAPID certificate (used with push notifications)
VAPID_EMAIL=your-email@example.com

# ----------------------------------------------------------------------------
# STORAGE CONFIGURATION
# ----------------------------------------------------------------------------
# MinIO Bucket Name
MINIO_BUCKET=famly-rewards

# ----------------------------------------------------------------------------
# OPTIONAL: ADVANCED CONFIGURATION
# ----------------------------------------------------------------------------
# Cloudflare API Token (only for DNS-01 challenge with custom domains)
# Uncomment if using Caddyfile.production with DNS-01
# CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
# The following values are NOT configurable (hardcoded in Docker Compose):
# - MONGODB_URI: mongodb://mongo:27017/famly (Docker internal)
# - API_URL: http://api:3001 (Docker internal, server-side only)
# - MINIO_ENDPOINT: minio:9000 (Docker internal)
# - MINIO_USE_SSL: false (Docker internal communication)
# - PORT: 3001 (API), 3000 (Web)
# - NODE_ENV: Automatically set based on compose file used
#
# These are intentionally not exposed to prevent misconfiguration.
# ============================================================================
