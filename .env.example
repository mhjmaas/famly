# Famly Home Deployment Configuration
# Copy this file to .env and update the values with your own secrets

# HTTPS Configuration
# Protocol for external access: https (via Caddy reverse proxy) or http (manual dev mode)
# Default: https (requires mkcert installation for local development)
# Set to "http" to disable Caddy and run services directly on ports 3000/3001
PROTOCOL=https

# Caddyfile Selection
# Determines which Caddy configuration to use
# - Caddyfile.localhost: Development with mkcert (default for start.sh)
# - Caddyfile.production: Production with Let's Encrypt (auto HTTP-01)
# - Caddyfile.http01.example: Template for production setup
# Copy Caddyfile.http01.example to Caddyfile.production and configure your domain
# Note: start.sh always runs in production mode (only Caddy ports exposed)
#       For development with direct port access, use start-dev.sh instead
CADDYFILE=Caddyfile.localhost

# MinIO Object Storage Configuration
# Console port for admin access - API port 9000 is internal only
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=famly-admin
MINIO_ROOT_PASSWORD=change-this-to-a-secure-password-min-32-chars
MINIO_BUCKET=famly-rewards

# API Configuration
API_PORT=3001

# CORS Configuration - Must match where web app is accessed from
# With HTTPS (dev): https://localhost:8443 or https://YOUR_DOMAIN
# With HTTPS (prod): https://YOUR_DOMAIN
# With HTTP: http://localhost:3000 or http://YOUR_LOCAL_IP:3000
CLIENT_URL=https://localhost:8443

# Better Auth Configuration (Used for authentication)
# IMPORTANT: Generate a secure random string of at least 32 characters
# You can generate one using: openssl rand -base64 32
BETTER_AUTH_SECRET=change-this-to-a-secure-random-string-min-32-chars-required

# IMPORTANT: Update this with your actual domain or IP address
# With HTTPS (dev): https://localhost:8443/api (Caddy uses port 8443 locally)
# With HTTPS (prod): https://YOUR_DOMAIN/api (production uses standard port 443)
# With HTTP: http://localhost:3001 or http://YOUR_LOCAL_IP:3001
# Note: When using Caddy, API is accessed via /api path on main domain
BETTER_AUTH_URL=https://localhost:8443/api

# Web Application Configuration
WEB_PORT=3000

# Client-side API URL (used by browser/client-side code)
# IMPORTANT: Update this with your actual API URL
# With HTTPS (dev): https://localhost:8443/api (Caddy uses port 8443 locally)
# With HTTPS (prod): https://YOUR_DOMAIN/api (production uses standard port 443)
# With HTTP: http://localhost:3001 or http://YOUR_LOCAL_IP:3001
NEXT_PUBLIC_API_URL=https://localhost:8443/api

# Server-side API URL (used by Next.js server components)
# NOTE: This is automatically set in docker-compose.yml to http://api:3001
# Only needed if running outside Docker or with custom network setup
# API_URL=http://localhost:3001

# Deployment Mode Configuration
# Determines how the application behaves for registration and onboarding
# - saas: Multi-tenant mode with open registration and landing page (default)
# - standalone: Single-family mode with one-time onboarding, registration locks after first family
DEPLOYMENT_MODE=standalone

# Optional: For custom internal domains with Let's Encrypt DNS-01 challenge
# Uncomment and configure if using custom domain (e.g., my.famly.eu)
# CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here
